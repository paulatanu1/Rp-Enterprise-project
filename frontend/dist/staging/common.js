(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[592],{2812:(J,w,u)=>{"use strict";u.d(w,{s:()=>B});var b=u(529),S=u(2340),E=u(727);class p extends E.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const m={setInterval(i,e,...t){const{delegate:r}=m;return r?.setInterval?r.setInterval(i,e,...t):setInterval(i,e,...t)},clearInterval(i){const{delegate:e}=m;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};var I=u(8737);const v={now:()=>(v.delegate||Date).now(),delegate:void 0};class A{constructor(e,t=A.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}A.now=v.now;const l=new class P extends A{constructor(e,t=A.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}(class N extends p{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const d=this.id,f=this.scheduler;return null!=d&&(this.id=this.recycleAsyncId(f,d,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(f,this.id,t),this}requestAsyncId(e,t,r=0){return m.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&m.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let d,r=!1;try{this.work(e)}catch(f){r=!0,d=f||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),d}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,I.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}});var o=u(4482),h=u(8421),g=u(3888),z=u(5403),H=u(9672);const K=(0,g.d)(i=>function(t=null){i(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t});function T(i,e){const{first:t,each:r,with:d=V,scheduler:f=e??l,meta:L=null}=function c(i){return i instanceof Date&&!isNaN(i)}(i)?{first:i}:"number"==typeof i?{each:i}:i;if(null==t&&null==r)throw new TypeError("No timeout provided.");return(0,o.e)((U,C)=>{let y,n,a=null,D=0;const M=F=>{n=(0,H.f)(C,f,()=>{try{y.unsubscribe(),(0,h.Xf)(d({meta:L,lastValue:a,seen:D})).subscribe(C)}catch(X){C.error(X)}},F)};y=U.subscribe((0,z.x)(C,F=>{n?.unsubscribe(),D++,C.next(a=F),r>0&&M(r)},void 0,void 0,()=>{n?.closed||n?.unsubscribe(),a=null})),!D&&M(null!=t?"number"==typeof t?t:+t-f.now():r)})}function V(i){throw new K(i)}var k=u(262),x=u(2843),R=u(4004),G=u(1682),O=u.n(G),j=u(8256),W=u(2019);let B=(()=>{class i{constructor(t,r){this.router=t,this.http=r}ApiCallWithLocalization(t,r,d,f){return this.ApiCall(t,r,d,f)}ApiCall(t,r,d,f,L="en",U=!1){location.pathname.split("/").splice(1,1),0==U&&(r=S.N.API_URL+"/"+r);let y=new b.WM;return null==f&&(y=y.set("Authorization","Bearer "+O().get("login_token"))),"post"===d?this.http.post(r,t,{headers:y,observe:"response"}).pipe(T(S.N.API_TIMEOUT),(0,k.K)(n=>(console.log(n,"errr"),console.error("HTTP request failed:",n),(0,x._)("Something went wrong. Please try again later."))),(0,R.U)(n=>{const a=n.body;return a.status=n.status,console.log(a.access_token,"responseObj"),void 0!==a.access_token&&(O().set("login_token",a.access_token),console.log(a.access_token,"token 12")),a})):"get"==d?(console.log(y,"http"),this.http.get(r,{headers:y,observe:"response"}).pipe(T(S.N.API_TIMEOUT),(0,k.K)((n,a)=>(0,x._)(n)),(0,R.U)(n=>{console.log(n,"response");var a=JSON.parse(JSON.stringify(n.body));return a.status=n.status,null!=a.token&&O().set("login_token",a.token),a}))):"put"==d?(console.log(y),this.http.put(r,t,{headers:y,observe:"response"}).pipe(T(S.N.API_TIMEOUT),(0,k.K)((n,a)=>(0,x._)(n)))):(console.log(y),this.http.post(r,t,{headers:y,observe:"response"}).pipe(T(S.N.API_TIMEOUT),(0,k.K)((n,a)=>(0,x._)(n)),(0,R.U)(n=>{if(204==n.status)return n;var a=JSON.parse(JSON.stringify(n.body));return a.status=n.status,null!=a.token&&O().set("login_token",a.token),a})))}DeleteAdminUserInfoFromLocalStorage(){O().remove("login_token")}HandleErrorCode(t,r=null){let d=t.status,f=S.N.ERROR_REDIRECT;401==t.status?(d=401,this.DeleteAdminUserInfoFromLocalStorage(),this.router.navigate(["/login"])):404==t.status&&1==f?this.router.navigate(["/page-not-found"]):500==t.status&&1==f&&this.router.navigate(["/internal-server-error"])}HandleSuccessCode(t,r=null){let d=t.status;202==t.status&&(d=202,O().set("login_token",t.response.token))}GetUserInfoFromLocalStorage(){return O().get("login_token")}}return i.\u0275fac=function(t){return new(t||i)(j.LFG(W.F0),j.LFG(b.eN))},i.\u0275prov=j.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},1682:function(J){J.exports=(()=>{"use strict";var w={d:(l,s)=>{for(var c in s)w.o(s,c)&&!w.o(l,c)&&Object.defineProperty(l,c,{enumerable:!0,get:s[c]})},o:(l,s)=>Object.prototype.hasOwnProperty.call(l,s)},u={};w.d(u,{default:()=>P});const b=(...l)=>{},S=l=>null!==l&&"Object"===l?.constructor.name;let E,p;const m=()=>{if(!E){E=!0;try{p=v.storage||localStorage,p.getItem("")}catch{p=(()=>{const l={getItem:c=>s[c]||null,setItem:(c,o)=>{s[c]=o},removeItem:c=>{s[c]=void 0},clear:()=>{s={__proto__:l}}};let s={__proto__:l};return s})()}A()}},I=String.fromCharCode(0),N=(l,s,c=!0)=>c?[...JSON.stringify(l)].map(o=>String.fromCharCode(o.charCodeAt(0)+s)).join(""):JSON.parse([...l].map(o=>String.fromCharCode(o.charCodeAt(0)-s)).join("")),v={ttl:null,encrypt:!1,encrypter:N,decrypter:(l,s)=>N(l,s,!1),secret:75,storage:void 0};Object.seal(v);const A=(l=!1)=>{m();for(const s of Object.keys(p)){const c=p.getItem(s);let o;try{o=JSON.parse(c||"")}catch{return}S(o)&&I in o&&(Date.now()>o.ttl||l)&&p.removeItem(s)}},P={config:v,set:(l,s,c={})=>{m();const o={...v,...c,encrypt:!1!==c.encrypt&&(c.encrypt||v.encrypt),ttl:null===c.ttl?null:c.ttl||v.ttl};try{const h=o.ttl&&!isNaN(o.ttl)&&o.ttl>0;let g=h?{[I]:s,ttl:Date.now()+1e3*o.ttl}:s;o.encrypt&&(h?g[I]=(o.encrypter||b)(g[I],o.secret):g=(o.encrypter||b)(g,o.secret)),p.setItem(l,JSON.stringify(g))}catch{return!1}},get:(l,s={})=>{m();const c=p.getItem(l),o={...v,...s,encrypt:!1!==s.encrypt&&(s.encrypt||v.encrypt),ttl:null===s.ttl?null:s.ttl||v.ttl};let h,g;try{h=JSON.parse(c||""),g=S(h)&&I in h,(o.decrypt||o.encrypt)&&(g?h[I]=(o.decrypter||b)(h[I],o.secret):h=(o.decrypter||b)(h,o.secret))}catch{}return g?Date.now()>h.ttl?(p.removeItem(l),null):h[I]:void 0!==h?h:c},flush:A,clear:()=>{m(),p.clear()},remove:l=>{m(),p.removeItem(l)}};return u.default})()}}]);